import React, { useEffect, useState } from "react";
import { twMerge } from "tailwind-merge";

interface Props {
  frequency: number;
  isLoading: boolean;
  isPlayingAudio: boolean;
}

const OldStrawberryAnimation = ({
  frequency,
  isLoading,
  isPlayingAudio,
}: Props) => {
  const defaultHeight = 4;
  const newHeight = isPlayingAudio ? 4 + (frequency * 24) / 100 : defaultHeight;

  return (
    <div
      className={twMerge(
        "centerwrap-straw relative scale-75 top-[40px] lg:top-0 lg:scale-100"
      )}
    >
      <svg
        width="38"
        height="26"
        viewBox="0 0 38 26"
        fill="none"
        className="absolute w-40 h-40 z-20 -top-20 left-20 rotate-12"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M18.6116 3.65347C18.6116 3.65347 21.7212 8.74214 21.8101 12.72C21.9173 17.5143 18.156 20.6531 18.156 20.6531C18.156 20.6531 15.3756 17.0469 15.5112 11.9896C15.6155 8.09934 18.6116 3.65347 18.6116 3.65347Z"
          fill="#519B07"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M20.8871 2.26307L18.6116 3.65347L16.4003 2.16321C16.9076 1.41041 17.7632 0.967341 18.6709 0.987474C19.5785 1.00774 20.4136 1.48827 20.8871 2.26307ZM17.0817 6.40214C17.8501 4.78334 18.6116 3.65347 18.6116 3.65347C18.6116 3.65347 19.3128 4.80107 20.0588 6.43227C20.8837 8.23601 21.7635 10.6312 21.8101 12.72C21.8648 15.1657 20.9127 17.1807 19.9668 18.5679C19.0585 19.8999 18.1559 20.6531 18.1559 20.6531C18.1559 20.6531 17.4733 19.7677 16.8011 18.2591C16.1165 16.7231 15.4428 14.5411 15.5111 11.9897C15.5628 10.0605 16.3257 7.99467 17.0817 6.40214ZM18.1559 20.6531C16.044 22.2813 16.0435 22.2807 16.0429 22.2799L16.0417 22.2783L16.0391 22.2749L16.0331 22.2671L16.018 22.2472C16.0067 22.2321 15.9928 22.2135 15.9764 22.1912C15.9437 22.1467 15.9012 22.0879 15.8504 22.0151C15.7489 21.8699 15.6139 21.6685 15.4571 21.4156C15.1443 20.9109 14.7403 20.1929 14.3437 19.2963C13.5555 17.5133 12.7641 14.9491 12.8455 11.9183C12.9127 9.40894 13.8812 6.91801 14.6936 5.21481C15.116 4.32907 15.5333 3.58081 15.8467 3.05134C16.0039 2.78547 16.1364 2.57214 16.2324 2.42134C16.2804 2.34587 16.3193 2.28574 16.3477 2.24241L16.3824 2.18987L16.3935 2.17334L16.3973 2.16747L16.4003 2.16321C16.4005 2.16281 16.4003 2.16321 18.6116 3.65347C20.8871 2.26307 20.8868 2.26267 20.8871 2.26307L20.8895 2.26694L20.8929 2.27281L20.9033 2.29001L20.9371 2.34614C20.9651 2.39321 21.004 2.45894 21.0521 2.54214C21.1485 2.70827 21.2827 2.94427 21.4421 3.23787C21.76 3.82307 22.1843 4.64707 22.6132 5.60961C23.4353 7.45427 24.4193 10.1213 24.4761 12.6604C24.5459 15.7824 23.3556 18.3009 22.2388 19.9684C21.6751 20.81 21.1077 21.4696 20.6747 21.9251C20.4571 22.154 20.2704 22.3345 20.1307 22.4641C20.0607 22.5291 20.0023 22.5813 19.9573 22.6208C19.9348 22.6405 19.9157 22.6571 19.9001 22.6704L19.8796 22.6879L19.8713 22.6948L19.8677 22.6979L19.866 22.6992C19.8652 22.6999 19.8644 22.7005 18.1559 20.6531ZM16.044 22.2813L18.1559 20.6531L19.8644 22.7005C19.3077 23.1652 18.5859 23.3829 17.8651 23.3039C17.1443 23.2248 16.4868 22.8556 16.044 22.2813Z"
          fill="#156319"
        />
        <path
          d="M2.78522 11.5057C2.78522 11.5057 8.74775 11.6209 12.1491 13.6852C16.2487 16.1733 16.8719 21.0325 16.8719 21.0325C16.8719 21.0325 12.3364 21.4371 8.14575 18.6029C4.92201 16.4228 2.78522 11.5057 2.78522 11.5057Z"
          fill="#70CA16"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2.83667 8.83961L2.7852 11.5057L0.339469 12.5687C-0.0223976 11.736 0.0642699 10.7764 0.56947 10.022C1.07467 9.26761 1.92893 8.82214 2.83667 8.83961ZM4.27974 14.2739C3.32827 12.7553 2.7852 11.5057 2.7852 11.5057C2.7852 11.5057 4.12987 11.5317 5.90627 11.7801C7.87053 12.0547 10.3629 12.6012 12.1491 13.6853C14.2404 14.9545 15.4271 16.8408 16.0879 18.3844C16.7224 19.8665 16.8719 21.0325 16.8719 21.0325C16.8719 21.0325 15.7584 21.1319 14.1249 20.8873C12.4619 20.6383 10.2599 20.0328 8.14573 18.6029C6.54707 17.5219 5.21574 15.7676 4.27974 14.2739ZM16.8719 21.0325C17.1088 23.6887 17.1079 23.6887 17.1069 23.6888L17.1049 23.6889L17.1007 23.6893L17.0908 23.6903L17.066 23.6923C17.0472 23.6937 17.024 23.6953 16.9964 23.6972C16.9413 23.7008 16.8688 23.7051 16.7803 23.7087C16.6032 23.7161 16.3608 23.7217 16.0632 23.7179C15.4695 23.7103 14.6469 23.6647 13.6777 23.5167C11.7507 23.2224 9.16334 22.5104 6.65174 20.8119C4.5724 19.4056 2.99334 17.2495 1.99427 15.6485C1.4748 14.8161 1.0684 14.0617 0.790534 13.5129C0.650934 13.2375 0.542404 13.0109 0.466804 12.8489C0.428937 12.7679 0.399336 12.7027 0.378003 12.6555L0.352403 12.598L0.344403 12.5797L0.3416 12.5732L0.339469 12.5687C0.339336 12.5681 0.33947 12.5687 2.7852 11.5057C2.83667 8.83961 2.83627 8.83961 2.83667 8.83961L2.84134 8.83974L2.84814 8.83987L2.86814 8.84027L2.93373 8.84214C2.9884 8.84374 3.0648 8.84641 3.1608 8.85054C3.35267 8.85867 3.62387 8.87254 3.95707 8.89601C4.62134 8.94267 5.5444 9.02814 6.58653 9.18414C8.58387 9.48321 11.3615 10.0879 13.5327 11.4056C16.2023 13.0259 17.6853 15.3837 18.4905 17.2221C18.8969 18.15 19.1477 18.9831 19.2989 19.5932C19.3748 19.8997 19.4267 20.1543 19.4608 20.3417C19.4779 20.4356 19.4905 20.5129 19.4996 20.572C19.5041 20.6016 19.5079 20.6267 19.5107 20.6469L19.5144 20.6737L19.5157 20.6844L19.5164 20.6891L19.5167 20.6912C19.5168 20.6923 19.5169 20.6932 16.8719 21.0325ZM17.1088 23.6887L16.8719 21.0325L19.5169 20.6932C19.6092 21.4124 19.4045 22.1383 18.9503 22.7033C18.4959 23.2685 17.8311 23.6243 17.1088 23.6887Z"
          fill="#156319"
        />
        <path
          d="M34.6052 9.85145C34.6052 9.85145 33.0708 17.5891 29.5405 20.5537C25.2855 24.1269 18.6861 21.4208 18.6861 21.4208C18.6861 21.4208 19.1995 15.1781 23.9352 11.7363C27.5783 9.08865 34.6052 9.85145 34.6052 9.85145Z"
          fill="#6DBB20"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M37.2208 10.37L34.6051 9.85133L34.8929 7.20026C35.6364 7.28093 36.3117 7.67012 36.7544 8.27279C37.1971 8.87559 37.3663 9.63653 37.2208 10.37ZM31.8969 9.75239C33.48 9.72919 34.6051 9.85133 34.6051 9.85133C34.6051 9.85133 34.388 10.9464 33.9291 12.4705C33.1683 14.9977 31.7427 18.7043 29.5404 20.5537C25.2855 24.1269 18.686 21.4208 18.686 21.4208C18.686 21.4208 19.1993 15.178 23.9352 11.7363C26.1205 10.148 29.5235 9.78706 31.8969 9.75239ZM18.686 21.4208C16.0284 21.2023 16.0284 21.2013 16.0285 21.2004L16.0287 21.1983L16.0291 21.1937L16.03 21.1828L16.0327 21.1541C16.0347 21.132 16.0375 21.1039 16.0411 21.0699C16.0483 21.002 16.0587 20.9108 16.0733 20.7988C16.1028 20.5751 16.1493 20.2663 16.2209 19.8911C16.3637 19.1437 16.6096 18.1157 17.0271 16.962C17.8516 14.6831 19.4156 11.7244 22.3675 9.57906C24.8345 7.78613 28.156 7.28626 30.4676 7.13959C31.6895 7.06213 32.7785 7.07626 33.5624 7.10919C33.9561 7.12586 34.2773 7.14733 34.5053 7.16533C34.6195 7.17426 34.7104 7.18239 34.7759 7.18852L34.8544 7.19626L34.8788 7.19879L34.8872 7.19959L34.8929 7.20026C34.8935 7.20039 34.8929 7.20026 34.6051 9.85133C37.2209 10.37 37.2209 10.3695 37.2208 10.37L37.2199 10.3752L37.2183 10.3832L37.2133 10.4076L37.1964 10.4891C37.182 10.5575 37.1612 10.6535 37.1341 10.7743C37.0799 11.0157 36.9996 11.3568 36.8924 11.7725C36.6788 12.6008 36.3539 13.7416 35.9075 14.9893C35.0652 17.3428 33.6068 20.6211 31.2553 22.5957C28.3239 25.0576 24.7341 25.2421 22.2383 24.9792C20.9533 24.8439 19.8375 24.5789 19.0439 24.3497C18.6443 24.2344 18.3188 24.1259 18.0857 24.0431C17.9691 24.0016 17.8749 23.9665 17.8057 23.94C17.7712 23.9267 17.7427 23.9155 17.7208 23.9068L17.6927 23.8956L17.6823 23.8913L17.6761 23.8888C17.6752 23.8884 17.6743 23.8881 18.686 21.4208ZM16.0284 21.2023L18.686 21.4208L17.6743 23.8881C16.5991 23.4472 15.9331 22.3605 16.0284 21.2023Z"
          fill="#156319"
        />
        <path
          d="M28.3848 20.05C31.3033 17.9289 33.0583 11.6789 33.0583 11.6789C26.0391 14.4079 22.3129 19.3257 21.1275 21.1757C21.1275 21.1757 25.4663 22.1711 28.3848 20.05Z"
          fill="#56A409"
        />
      </svg>

      <div className="face-straw-old">
        <div className="straw-pattern straw-pattern-1"></div>
        <span
          className={twMerge(
            "rotator-straw-old",
            !isPlayingAudio && "run-animate"
          )}
        >
          <span className="eyes-straw-old" />
          <div
            className="absolute w-full h-full bg-black top-44 left-10 transition-[width] ease-in-out duration-150 rotate-360 rounded-xl"
            style={{
              width: `24px`,
              height: `${newHeight}px`,
            }}
          />
        </span>
      </div>
    </div>
  );
};

export default OldStrawberryAnimation;
